% Scientific Paper LaTeX Template
% This template fixes the \tightlist error, supports both portrait and landscape images,
% and follows best practices for scientific paper formatting.

% ======== DOCUMENT CLASS AND BASIC SETUP ========
\documentclass[11pt,a4paper,oneside,twocolumn]{article}
% ======== ESSENTIAL PACKAGES ========
\usepackage[utf8]{inputenc}        % UTF-8 input encoding
\usepackage[T1]{fontenc}           % Font encoding
\usepackage{lmodern}               % Latin Modern fonts
\usepackage{microtype}             % Micro-typographic refinements
\usepackage{amsmath,amssymb}       % Math symbols and environments
\usepackage{mathtools}             % Extensions to amsmath
\usepackage{physics}               % Physics notations

% ======== PAGE LAYOUT ========
\usepackage[margin=2cm,columnsep=1cm]{geometry}  % Page margins and column separation
\usepackage{setspace}              % Line spacing
\setstretch{1.1}                   % Tighter spacing for 2-column

% ======== HEADERS AND FOOTERS ========
\usepackage{fancyhdr}              % Header/footer control
\pagestyle{fancy}
\fancyhf{}                         % Clear all headers/footers
\fancyhead[L]{\leftmark}           % Section in left header
\fancyhead[R]{\thepage}            % Page number in right header
\renewcommand{\headrulewidth}{0.4pt}

% ======== GRAPHICS AND TABLES ========
\usepackage{graphicx}              % Include graphics
% Add graphics path to help find figure files
\graphicspath{{./figures/}{../figures/}}
\usepackage{adjustbox}             % Adjust box properties
\usepackage{rotating}              % Rotate floats
\usepackage{pdflscape}             % Landscape orientation support
\usepackage{float}                 % Improved float control
\usepackage{booktabs}
\usepackage{supertabular}          % Professional tables (replaces longtable for twocolumn)
\usepackage{array}                 % Extended tabular environments
\usepackage{multirow}              % Multiple rows in tables
\usepackage{tabularx}              % Tables with auto column width
\usepackage{threeparttable}        % Tables with footnotes

% ======== HYPERLINKS AND REFERENCES ========
\usepackage[colorlinks=true,
            linkcolor=blue,
            citecolor=blue,
            urlcolor=blue]{hyperref} % Hyperlinks
\usepackage{cleveref}              % Intelligent cross-references

% ======== BIBLIOGRAPHY ========
\usepackage[backend=biber,         % Biber backend
            style=numeric,         % Numeric citation style
            sorting=none,          % Order of appearance
            giveninits=true]{biblatex} % Bibliography management 

% ======== CODE AND ALGORITHMS ========
\usepackage{listings}              % Code listings
\usepackage{algorithm}             % Algorithm environment
\usepackage{algpseudocode}         % Pseudocode in algorithms
\usepackage{fancyvrb}              % For code blocks
\usepackage{framed}                % For shaded environments

% ======== COLORS ========
\usepackage{xcolor}                % Color support

% Define Shaded environment for code blocks
\definecolor{shadecolor}{rgb}{0.97,0.97,0.97}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newenvironment{Highlighting}{\begin{Shaded}}{\end{Shaded}}

% Define syntax highlighting commands
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}

% ======== CAPTIONS ========
\usepackage[font=small,
            labelfont=bf,
            labelsep=period,
            justification=justified]{caption} % Caption styling

% ======== FIX FOR TIGHTLIST ERROR ========
% Define \tightlist to do nothing, which fixes the error
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

% Define pandocbounded command to fix conversion error
\providecommand{\pandocbounded}[1]{\csname pandocbounded#1\endcsname}

% ======== CUSTOM COMMANDS ========
% For landscape figures
\newcommand{\landscapefigure}[4]{%
  % Parameters:
  % #1: label
  % #2: caption
  % #3: width (e.g., 0.9\linewidth)
  % #4: image path
  \begin{landscape}
    \begin{figure}[htbp]
      \centering
      \includegraphics[width=#3]{#4}
      \caption{#2}
      \label{#1}
    \end{figure}
  \end{landscape}
}

% For portrait figures
\newcommand{\portraitfigure}[4]{%
  % Parameters:
  % #1: label
  % #2: caption
  % #3: width (e.g., 0.8\linewidth)
  % #4: image path
  \begin{figure}[htbp]
    \centering
    \includegraphics[width=#3]{#4}
    \caption{#2}
    \label{#1}
  \end{figure}
}

% ======== DOCUMENT METADATA ========
% These fields can be set from Pandoc variables
$if(title)$
\title{$title$}
$else$
\title{Untitled Document}
$endif$

$if(author)$
\author{$author$}
$else$
\author{}
$endif$

$if(date)$
\date{$date$}
$else$
\date{\today}
$endif$

% ======== DOCUMENT START ========
\begin{document}

% ======== TITLE PAGE ========
\maketitle

% ======== ABSTRACT ========
$if(abstract)$
\begin{abstract}
$abstract$
\end{abstract}
$endif$

% ======== MAIN CONTENT ========
$body$

% ======== BIBLIOGRAPHY ========
$if(bibliography)$
\printbibliography[title=References]
$endif$

\end{document}

