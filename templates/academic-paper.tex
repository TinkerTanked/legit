% Academic Paper Template
% This template provides a traditional academic format with different margins, fonts, and layout
% compared to the scientific paper template, while remaining compatible with the same workflow.
% 
% It accepts the same variables as the scientific paper template but presents content in a more
% traditional academic style.

\documentclass[12pt, a4paper, onecolumn]{article}

% Essential packages
\usepackage[margin=1.2in]{geometry} % Different margins from scientific template
\usepackage{fontspec}
\usepackage[english]{babel}
\usepackage{csquotes}
\usepackage{microtype}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{physics}
% Add graphics path to help find figure files
\graphicspath{{./figures/}{../figures/}}
\usepackage{rotating}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabularray}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}
\usepackage{xcolor}
\usepackage{hyperref}
\usepackage{fancyvrb}              % For code blocks
\usepackage{framed}                % For shaded environments

% Define Shaded environment for code blocks
\definecolor{shadecolor}{rgb}{0.97,0.97,0.97}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newenvironment{Highlighting}{\begin{Shaded}}{\end{Shaded}}

% Define syntax highlighting commands
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\usepackage{setspace}
\usepackage{fancyhdr}
\usepackage{titlesec}
\usepackage[backend=biber, style=chicago-authordate, citestyle=authoryear]{biblatex}

% Define missing commands that might be used by pandoc
\providecommand{\tightlist}{\setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

% Define pandocbounded command to fix conversion error
\providecommand{\pandocbounded}[1]{\csname pandocbounded#1\endcsname}

% Font settings (different from scientific template)
% Use commonly available fonts on macOS/Linux
\setmainfont{Times New Roman}[
  BoldFont = Times New Roman Bold,
  ItalicFont = Times New Roman Italic,
  BoldItalicFont = Times New Roman Bold Italic,
]
\setsansfont{Arial}
\setmonofont{Courier New}

% Hyperref settings
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,
    urlcolor=blue,
    citecolor=blue,
    pdfauthor={$author$},
    pdftitle={$title$},
    pdfpagemode={UseOutlines},
    bookmarksopen=true,
    pdfstartview={FitH}
}

% Define custom section formatting (different style from scientific template)
\titleformat{\section}
  {\normalfont\Large\bfseries\centering}{\thesection.}{1em}{}
\titleformat{\subsection}
  {\normalfont\large\bfseries\itshape}{\thesubsection.}{1em}{}
\titleformat{\subsubsection}
  {\normalfont\normalsize\bfseries}{\thesubsubsection.}{1em}{}

% Set line spacing
\onehalfspacing

% Header and footer configuration
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0.5pt}
\renewcommand{\footrulewidth}{0.5pt}
\fancyhead[L]{\small\textit{$title$}}
\fancyhead[R]{\small\textit{$author$}}
\fancyfoot[C]{\thepage}

% Custom figure and image handling commands
\newcommand{\portraitfigure}[4]{
  \begin{figure}[htbp]
    \centering
    \includegraphics[width=#1\textwidth]{#4}
    \caption{#3}
    \label{fig:#2}
  \end{figure}
}

\newcommand{\landscapefigure}[4]{
  \begin{landscape}
    \begin{figure}[htbp]
      \centering
      \includegraphics[width=#1\textwidth]{#4}
      \caption{#3}
      \label{fig:#2}
    \end{figure}
  \end{landscape}
}

% Title page formatting
\usepackage{titling}
\pretitle{\begin{center}\LARGE\bfseries}
\posttitle{\end{center}\vskip 0.5em}
\preauthor{\begin{center}\large}
\postauthor{\end{center}}
\predate{\begin{center}\large}
\postdate{\end{center}}

\title{$title$}
\author{$author$}
\date{$date$}

% Begin document
\begin{document}

% Print title page
\maketitle
\thispagestyle{empty}

% Abstract if provided
$if(abstract)$
\begin{abstract}
\noindent $abstract$
\end{abstract}
$endif$

% Table of contents (optional)
$if(toc)$
\tableofcontents
\newpage
$endif$

% Main document content
$body$

% References section if provided
$if(bibliography)$
\printbibliography[title=References]
$endif$

\end{document}

